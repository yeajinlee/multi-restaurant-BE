<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="mappers.search">
<<<<<<< HEAD
	<resultMap id="searchResult" type="SearchVO">
=======
	<resultMap id="searchResult" type="searchVO">
>>>>>>> a12ea4eb81f67def2e28cd75ad9c75306c2e53b2
		<result property="rest_NO" column="rest_NO"/>
		<result property="rest_Name" column="rest_Name"/>
		<result property="rest_Price" column="rest_Price"/>
		<result property="rest_Address" column="rest_Address"/>
		<result property="rest_Phone" column="rest_Phone"/>
		<result property="rest_Scope" column="rest_Scope"/>
		<result property="rest_Social" column="rest_Social"/>
		<result property="rest_OpenDate" column="rest_OpenDate"/>
	
	<result property="rest_FileName" column="rest_FileName"/>
	<result property="rest_Menu" column="rest_Menu"/>
	</resultMap>
	
	<resultMap id="imageResult" type="ImageFileVO">
	   <result property="rest_NO" column="rest_NO" />
	   <result property="fileName" column="fileName" />
	   <result property="reg_id" column="reg_id" />
	   <result property="image_id" column="image_id" />
	   <result property="fileType" column="fileType" />
	</resultMap>

	
	  <select id="selectBySearchWord" resultMap="searchResult"   parameterType="String">
    <![CDATA[
    
  	SELECT ri.*, rm.fileName from Restaurant_Info ri, rest_Image rm where
     ri.rest_NO=rm.rest_NO and rm.filetype='main_image'
       and ri.rest_Address||ri.rest_name like '%'|| #{searchWord} || '%'
     

     ]]><!-- 아니면 rest_Scope desc -->      
  </select>
  <!--   <select id="countBySearchWord" resultMap="searchResult"   parameterType="int">
    <![CDATA[
    
  	  SELECT COUNT(*) from (select ri.*, rm.fileName from Restaurant_Info ri, rest_Image rm where
     ri.rest_NO=rm.rest_NO and rm.filetype='main_image'
       and ri.rest_Name like '%'|| #{searchWord} || '%')
     

     ]]></select> -->
    </mapper>
  
  
  
  <!--      요것도 추가?  rf.rest_address like '%'|| #{searchWord} || '%'
    요것도?      rf.rest_Menu like '%'|| #{searchWord} || '%' -->
  	<!-- <select id="selectKeywordSearch" resultType="String"   parameterType="String"  >
	    <![CDATA[
        select rest_Name from Restaurant_Info
        where         
        goods_title like '%'|| #{keyword} || '%'
        order by rest_OpenDate desc 
		]]>
	</select> -->
  
<!--   	<select id="selectSideSearch" resultType="String"   parameterType="String"  >
	    <![CDATA[
         select rf.(social), rm.대표이미지 이름 from Restaurant_Info ri, Restaurant_Image rm where
     rf.rest_NO=rm.rest_NO and rm.filetype='대표이미지'
     and rf.rest_Name like '%'|| #{searchWord} || '%'
     요것도 추가?  rf.rest_address like '%'|| #{searchWord} || '%'
    요것도?      rf.rest_Menu like '%'|| #{searchWord} || '%'
     order by 어떤가게 논의 desc
		]]>
	 -->
  
